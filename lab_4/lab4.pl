%определение оператора, используемого в словаре
op(200, xfy, ':').


%Вариант 8
%преобразователь активных и пассивных форм
%в глубинные структуры типа и сравнить полученные глубинные структуры.



%СРАВНИТЬ ДВЕ ФРАЗЫ НА ЕСТЕССТВЕННОМ ЯЗЫКЕ
%представив их глубинной структурой
%(Фраза1, Фраза2, Гл.Структура1, Гл.Структура2, Равны?)
compare(X,Y,Ph1,Ph2,Eq):-
  %Выделение структуры фраз
  a_phrase(Ph1,_,X),
  a_phrase(Ph2,_,Y),
  Ph1 = [A, Obj1, Subj1],
  Ph2 = [B, Obj2, Subj2],
  %Сортировка списков объектов и субъектов
  %чтобы фразы с различным их порядком следования были равными
  sort(Obj1,S1),
  sort(Subj1, S2),
  sort(Obj2, S3),
  sort(Subj2, S4),
  %непосредственно сравнение
  cmp([A,S1,S2],[B,S3,S4],Eq).

%СРАВНЕНИЕ
%(Объект 1, Объект2, yes/no)
cmp(X,Y,Ans):-
  X = Y,
  Ans = 'yes', !.
cmp(_,_,'no').

%поиск словоформы в словаре
fid(X, XC, K, File):-
  member(M, File),
  condition(X, XC, K, M).

condition(X, XC, K, XC:K:L):-
  member(X, L).

%несколько существтельных соединенных союзом
compose_agent([X|Ans], K,[H,Y|T]):-
  agent(X, K, H),
  union(Y),
  compose_agent(Ans, K, T).
%одно существительное
compose_agent([X], K,[H]):-
  agent(X, K, H).

%Анализ фразы в активном залоге
a_phrase(P, zalog('актив'), L):-
  append([X|XT], [Y|Z], L),
  glag(X2, zalog('актив'), Y),
  compose_agent(X1, pad('именит'), [X|XT]),
  compose_agent(X3, pad('винит'), Z),
  P = [X2, X1 ,X3].

%Анализ фразы в пассивном залоге
a_phrase(P, zalog('пассив'),L):-
  append([X|XT], [Y|Z], L),
  glag(X2, zalog('пассив'), Y),
  compose_agent(X1, pad('именит'), [X|XT]),
  compose_agent(X3, pad('творит'), Z),
  P = [X2, X3 ,X1].

%Предикат существительного
agent(XC, K, X):-
  gen_mest(File_mest),
  fid(X, XC, K, File_mest).

%предикат глагола
glag(XC, K, X):-
  gen_glag(File_glag),
  fid(X, XC, K, File_glag).

%СЛОВАРИ

%Словарь существительных
gen_mest(F):-
  F=['Маша':pad('именит'):['Маша'],
    'Маша':pad('винит'):['Машу'],
    'Маша':pad('творит'):['Машей'],

    'Саша':pad('именит'):['Саша'],
    'Саша':pad('винит'):['Сашу'],
    'Саша':pad('творит'):['Сашей'],

    'Петя':pad('именит'):['Петя'],
    'Петя':pad('винит'):['Петю'],
    'Петя':pad('творит'):['Петей'],

    'Лена':pad('именит'):['Лена'],
    'Лена':pad('винит'):['Лену'],
    'Лена':pad('творит'):['Леной'],

    'деньги':pad('именит'):['деньги'],
    'деньги':pad('винит'):['деньги'],
    'деньги':pad('творит'):['деньгами'],

    'шоколад':pad('именит'):['шоколад'],
    'шоколад':pad('винит'):['шоколад'],
    'шоколад':pad('творит'):['шоколадом'],

    'программирование':pad('именит'):['программирование'],
    'программирование':pad('винит'):['программирование'],
    'программирование':pad('творит'):['программированием'],

    'аниме':pad('именит'):['аниме'],
    'аниме':pad('винит'):['аниме'],
    'аниме':pad('творит'):['аниме']
    ].
%Словарь глаголов
gen_glag(F):-
  F=['любить':zalog('актив'):['любит', 'любят'],
    'любить':zalog('пассив'):['любим', 'любима', 'любимо', 'любимы'],

    'обожать':zalog('актив'):['обожает', 'обожают'],
    'обожать':zalog('пассив'):['обожаем', 'обожаема', 'обожаемо', 'обожаемы']

    ].
%предикат союза
union('и').
